<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Percentual de Gordura Corporal</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --background: #f8f9fa;
            --success-color: #27ae60;
            --error-color: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--background);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            margin: 1rem 0;
        }

        h1 {
            font-size: 2.2rem;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 0.5rem;
        }

        .section {
            background-color: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
            width: 90%;
            max-width: 800px;
            transition: transform 0.2s;
        }

        .section:hover {
            transform: translateY(-3px);
        }

        .calculator {
            background-color: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            width: 90%;
            max-width: 400px;
        }

        .input-group {
            margin: 1rem 0;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
            font-weight: 500;
        }

        input, select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        button {
            background-color: var(--secondary-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #2980b9;
        }

        #result {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 8px;
            background-color: #f8f9fa;
            display: none;
        }

        .classification {
            margin-top: 1rem;
            padding: 0.5rem;
            border-radius: 6px;
            font-weight: bold;
        }

        .error {
            color: var(--error-color);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .method-description {
            color: #666;
            margin: 0.5rem 0;
        }

        @media (max-width: 480px) {
            .calculator {
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <h1>Calculadora de Gordura Corporal</h1>

    <div class="section" id="method1">
        <h2>Método Jackson & Pollock</h2>
        <p class="method-description">
            Utiliza medidas de dobras cutâneas para estimar a densidade corporal. Ideal para uso com adipômetro.
        </p>
    </div>

    <div class="section" id="method2">
        <h2>Método da Marinha dos EUA</h2>
        <p class="method-description">
            Baseado em medidas de circunferências corporais. Requer fita métrica flexível.
        </p>
    </div>

    <div class="section" id="method3">
        <h2>Método YMCA</h2>
        <p class="method-description">
            Utiliza cintura e peso para cálculo. Bom para avaliação rápida.
        </p>
    </div>

    <div class="calculator">
        <h2>Calculadora</h2>
        <form id="bfCalculator">
            <div class="input-group">
                <label for="method">Método de Cálculo:</label>
                <select id="method" name="method">
                    <option value="jackson_pollock">Jackson & Pollock</option>
                    <option value="navy">Marinha dos EUA</option>
                    <option value="ymca">YMCA</option>
                </select>
            </div>

            <div id="inputs"></div>
            
            <div class="input-group">
                <button type="button" onclick="calculateBF()">Calcular</button>
            </div>
        </form>
        <div id="result"></div>
    </div>

    <script>
        const formulas = {
            jackson_pollock: (age, sumSkinfolds) => {
                const density = 1.10938 - (0.0008267 * sumSkinfolds) + 
                             (0.0000016 * Math.pow(sumSkinfolds, 2)) - 
                             (0.0002574 * age);
                return ((4.95 / density) - 4.5) * 100;
            },

            navy: (sex, neck, waist, hip, height) => {
                neck = Number(neck);
                waist = Number(waist);
                hip = Number(hip);
                height = Number(height);

                if (sex === 'male') {
                    return 86.010 * Math.log10(waist - neck) - 
                         70.041 * Math.log10(height) + 36.76;
                }
                return 163.205 * Math.log10(waist + hip - neck) - 
                     97.684 * Math.log10(height) - 78.387;
            },

            ymca: (sex, waistCm, weightKg) => {
                const waistInches = waistCm * 0.393701;
                const weightLbs = weightKg * 2.20462;

                if (sex === 'male') {
                    return ((weightLbs * 1.082) + 94.42 - (waistInches * 4.15)) / weightLbs * 100;
                }
                return ((weightLbs * 0.732) + 8.987 + (waistCm / 3.140) - 
                      (waistInches * 4.15)) / weightLbs * 100;
            }
        };

        const classifications = {
            male: [
                { range: [2, 5], category: 'Essencial' },
                { range: [6, 13], category: 'Atleta' },
                { range: [14, 17], category: 'Fitness' },
                { range: [18, 24], category: 'Aceitável' },
                { range: [25, 100], category: 'Obesidade' }
            ],
            female: [
                { range: [10, 13], category: 'Essencial' },
                { range: [14, 20], category: 'Atleta' },
                { range: [21, 24], category: 'Fitness' },
                { range: [25, 31], category: 'Aceitável' },
                { range: [32, 100], category: 'Obesidade' }
            ]
        };

        function createInput(id, label, type = 'number') {
            const container = document.createElement('div');
            container.className = 'input-group';

            const labelEl = document.createElement('label');
            labelEl.htmlFor = id;
            labelEl.textContent = label;

            const input = document.createElement('input');
            input.type = type;
            input.id = id;
            input.name = id;
            input.required = true;

            const error = document.createElement('div');
            error.className = 'error';
            error.id = `${id}Error`;

            container.append(labelEl, input, error);
            return container;
        }

        function showInputs() {
            const method = document.getElementById('method').value;
            const inputsDiv = document.getElementById('inputs');
            inputsDiv.innerHTML = '';

            const commonInputs = {
                navy: [
                    createInput('sex', 'Sexo:', 'select'),
                    createInput('neck', 'Pescoço (cm)'),
                    createInput('waist', 'Cintura (cm)'),
                    createInput('height', 'Altura (cm)'),
                    createInput('hip', 'Quadril (cm)')
                ],
                ymca: [
                    createInput('sex', 'Sexo:', 'select'),
                    createInput('waist', 'Cintura (cm)'),
                    createInput('weight', 'Peso (kg)')
                ],
                jackson_pollock: [
                    createInput('age', 'Idade'),
                    createInput('sum_of_skinfolds', 'Soma das Dobras (mm)')
                ]
            };

            if (method === 'navy') {
                const sexSelect = commonInputs.navy[0].querySelector('select');
                if (sexSelect) {
                    sexSelect.innerHTML = `
                        <option value="male">Masculino</option>
                        <option value="female">Feminino</option>
                    `;
                }
                commonInputs.navy.forEach(input => inputsDiv.appendChild(input));
            } 
            else if (method === 'ymca') {
                const sexSelect = commonInputs.ymca[0].querySelector('select');
                if (sexSelect) {
                    sexSelect.innerHTML = `
                        <option value="male">Masculino</option>
                        <option value="female">Feminino</option>
                    `;
                }
                commonInputs.ymca.forEach(input => inputsDiv.appendChild(input));
            } 
            else {
                commonInputs.jackson_pollock.forEach(input => inputsDiv.appendChild(input));
            }
        }

        function validateInputs(method) {
            let isValid = true;
            const inputs = document.querySelectorAll('#inputs input:not([type="hidden"])');
            
            inputs.forEach(input => {
                const errorEl = document.getElementById(`${input.id}Error`);
                if (!input.value || Number(input.value) <= 0) {
                    errorEl.textContent = 'Por favor, preencha este campo corretamente';
                    errorEl.style.display = 'block';
                    isValid = false;
                } else {
                    errorEl.style.display = 'none';
                }
            });

            return isValid;
        }

        function getClassification(percentage, sex) {
            const categories = classifications[sex];
            for (const { range, category } of categories) {
                if (percentage >= range[0] && percentage <= range[1]) {
                    return category;
                }
            }
            return 'Fora da escala';
        }

        function calculateBF() {
            const method = document.getElementById('method').value;
            if (!validateInputs(method)) return;

            let result;
            try {
                switch(method) {
                    case 'jackson_pollock':
                        result = formulas.jackson_pollock(
                            Number(document.getElementById('age').value),
                            Number(document.getElementById('sum_of_skinfolds').value)
                        );
                        break;
                    
                    case 'navy':
                        result = formulas.navy(
                            document.getElementById('sex').value,
                            document.getElementById('neck').value,
                            document.getElementById('waist').value,
                            document.getElementById('hip').value,
                            document.getElementById('height').value
                        );
                        break;
                    
                    case 'ymca':
                        result = formulas.ymca(
                            document.getElementById('sex').value,
                            document.getElementById('waist').value,
                            document.getElementById('weight').value
                        );
                        break;
                }
            } catch (error) {
                showResult('Erro no cálculo. Verifique os valores inseridos.', true);
                return;
            }

            const sex = method === 'navy' || method === 'ymca' 
                      ? document.getElementById('sex').value 
                      : 'male';
            
            const category = getClassification(result, sex);
            showResult(result, false, category);
        }

        function showResult(percentage, isError, category) {
            const resultEl = document.getElementById('result');
            resultEl.style.display = 'block';
            resultEl.innerHTML = isError 
                ? `<div style="color: ${isError ? 'var(--error-color)' : 'var(--success-color)'}">
                    ${percentage}
                   </div>`
                : `
                    <div style="color: var(--primary-color); font-size: 1.2rem;">
                        Percentual de Gordura: <strong>${percentage.toFixed(1)}%</strong>
                    </div>
                    <div class="classification" style="background-color: ${category === 'Obesidade' ? '#f8d7da' : '#d4edda'}">
                        Classificação: ${category}
                    </div>
                    <div style="margin-top: 1rem; font-size: 0.9rem;">
                        * Valores de referência para adultos
                    </div>
                `;
        }

        document.getElementById('method').addEventListener('change', () => {
            document.getElementById('result').style.display = 'none';
            showInputs();
        });

        window.addEventListener('DOMContentLoaded', showInputs);
    </script>
</body>
</html>